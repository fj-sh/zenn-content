---
title: "Azure Static Web Apps で作成したサイトにGoogleドメインの独自ドメインを設定する"
emoji: "🕌"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: true
---

Azure Static Web Apps にデプロイした静的サイトにカスタムドメインを設定してみます。

Azure Static Web Apps を開くと、左側の「設定」メニューに「カスタムドメイン」というメニューがあります。

この「カスタムドメイン」をクリックして左上にある「追加」ボタンを押します。

すると「ドメインの入力」が出てくるので、Google ドメインで登録済みのドメイン名を入力します。

すると次に、

- ドメイン所有権の検証
- ホスト名レコードタイプ
- ドメインを所有していることを確認するコードを生成します

という表示が出てきます。

ホスト名レコードタイプは TXT か CNAME が選択できます。

`CNAME` の場合

- 種類（CNAME）
- ホスト（www またはサブドメイン）
- 値

`TXT` の場合

- 種類（TXT）
- ホスト（@またはサブドメイン）
- 値

が表示されます。

この「値」をコピペして、Google ドメインに設定します。

Google ドメイン側の「DNS」を開き、カスタムレコードに`TXT`を指定します。

- ホスト名（そのまま）
- タイプ（TXT）
- TTL（1 時間）
- データ（Azure でコピペした値）

を指定して、しばらく待ちます。 Azure 側では「検証中」のローディングがぐるぐると回っているはずです。

何度かページをリロードすると、「状態」が「準備完了」になります。

## Google ドメインに CNAME を指定する

Azure のカスタムドメインの「ドキュメント」の列に「CNAME または ALIAS レコードを追加します」と表示されるので、Google ドメイン側で `CNAME` を設定します。

Google ドメインの「DNS」を開き、以下のように設定します。

- ホスト名 - `www`を指定
- タイプ - `CNAME` を指定
- TTL - `3600` を指定
- データ - Azure Static Web Apps で自動生成されたドメイン名を指定

[Azure Static Web Apps で無料の証明書を使用してカスタム ドメインを設定する](https://docs.microsoft.com/ja-jp/azure/static-web-apps/custom-domain?wt.mc_id=azurestaticwebapps_inline_inproduct_general&tabs=other-dns#create-an-alias-record)

[Using an Azure static web app with a Google domain](https://www.cgrimes.dev/using-azure-web-app-with-google-domains/)

## Azure Static Web Apps 側に `www.domain` を指定する

Azure Static Web Apps の カスタムドメイン を「追加」し、`www.ドメイン名` の `CNAME` を設定します。

その後、`www.ドメイン名` をブラウザで開くと、Azure Static Web Apps にデプロイしたサイトが開けます。
