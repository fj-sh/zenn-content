---
title: "Vue CLIã‚’ä½¿ã£ãŸé–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹æ‰‹é †"
emoji: "ğŸ’¬"
type: "tech"
topics: ["vue"]
published: true
---

ã€21Stepã§ä½“å¾— Vue.jsãƒãƒ³ã‚ºã‚ªãƒ³ã€ã®ç¬¬2ç« ã¨ã€Vue.jså…¥é–€ åŸºç¤ã‹ã‚‰å®Ÿè·µã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã¾ã§ã€ã®8ç« ã«ã€Vue CLIã‚’ä½¿ã£ãŸç’°å¢ƒæ§‹ç¯‰ã®æ‰‹é †ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

Vue.jsã®é–‹ç™ºç’°å¢ƒã®ä½œã‚Šæ–¹ã¯æ§˜ã€…ãªå ´æ‰€ã§ç´¹ä»‹ã•ã‚Œã¦ãŠã‚Šã€VSCodeã«å…¥ã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¾ã§å«ã‚ã‚‹ã¨ä¸‰è€…ä¸‰æ§˜ã§ã™ãŒã€æ›¸ç±ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹æ‰‹é †ã«ã¯ä¾¡å€¤ãŒã‚ã‚‹ã¨æ€ã£ãŸãŸã‚ã€ãƒ¡ãƒ¢ã‚’æ®‹ã—ã¾ã™ã€‚


## Node.jsç’°å¢ƒã®æ§‹ç¯‰

- Node.jsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- nvmã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã‚’è¡Œã„ã¾ã™ã€‚

ãªãŠã€ã¯ã˜ã‚ã®æ®µéšã§ç§ã®ç’°å¢ƒã¯nodeãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¦ã€nvmãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„çŠ¶æ…‹ã§ã—ãŸã€‚

```
% nvm -v
zsh: command not found: nvm
% node -v
v15.12.0
```

ä»¥ä¸‹ã®è¨˜äº‹ã«å¾“ã£ã¦ã€nodeã®ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«â†’nvmã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã„ã¾ã™ã€‚

[Install NVM On Mac With Brew](https://jamesauble.medium.com/install-nvm-on-mac-with-brew-adb921fb92cc)

```
brew uninstall --ignore-dependencies node
brew uninstall --force node
```

æ¬¡ã«nvmã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```
brew update
brew upgrade
brew install nvm
```

nvmã§nodeã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’è¡Œã„ã¾ã™ã€‚

```
% mkdir ~/.nvm
% echo 'export NVM_DIR=~/.nvm' >> ~/.zshrc
% echo 'source $(brew --prefix nvm)/nvm.sh' >> ~/.zshrc 
% source ~/.zshrc 
% echo $NVM_DIR
/Users/hoge/.nvm
% nvm -v
0.38.0
% nvm ls-remote
% nvm install 14.16.1
       v14.16.0   (LTS: Fermium)
       v14.16.1   (Latest LTS: Fermium)
% nvm install 14.16.1
% nvm ls
->     v14.16.1
% nvm use 14.16.1
Now using node v14.16.1 (npm v6.14.12)
% node -v
v14.16.1
% npm -v
6.14.12
```

## Vue CLIã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹
npm installã‚³ãƒãƒ³ãƒ‰ã§Vue CLIã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
```
% npm install -g @vue/cli
```
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚

```
% vue create sample-app
```

ã€Vue.jså…¥é–€ã€ã§ã¯`vue init webpack kanban-app`ã®ã‚ˆã†ã«`vue init`ã§ã®ä½œæˆãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ãŒã€3ç³»ä»¥å¾Œã¯`vue create`ã®åˆ©ç”¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ï¼ˆVue.jså…¥é–€ã§ã‚‚è¨€åŠã•ã‚Œã¦ã„ã¾ã™ï¼‰


## é–‹ç™ºç’°å¢ƒã®å¼·åŒ–

ã€Vue.jså…¥é–€ã€ã®8ç« 8ç¯€ã®æ‰‹é †ã§ã™ã€‚

### Vue.jsã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç’°å¢ƒ

Visual Studio Codeãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯Veturã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
SublimeTextã®å ´åˆã¯ Vue Syntax Highlightã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

### ESLintã®å°å…¥

```
% npm install --save-dev eslint-plugin-vue
```

```diff javascript:.eslintrc.js
// https://eslint.org/docs/user-guide/configuring

module.exports = {
  root: true,
  parserOptions: {
    parser: 'babel-eslint'
  },
  env: {
    browser: true,
  },
  extends: [
    // https://github.com/vuejs/eslint-plugin-vue#priority-a-essential-error-prevention
    // consider switching to `plugin:vue/strongly-recommended` or `plugin:vue/recommended` for stricter rules.
+    'plugin:vue/recommended', 
    // https://github.com/standard/standard/blob/master/docs/RULES-en.md
    'standard'
  ],
  // required to lint *.vue files
  plugins: [
    'vue'
  ],
  // add your custom rules here
  rules: {
    // allow async-await
    'generator-star-spacing': 'off',
    // allow debugger during development
+    'no-debugger': process.env.NODE_ENV === 'production' ? 'error' : 'off',
+    'import/no-webpack-loader-syntax': process.env.NODE_ENV === 'production' ? 'error' : 'off'
  }
}
```

ESLintã®è¨­å®šå¤‰æ›´å¾Œã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒªãƒ³ãƒˆãŒæ­£å¸¸ã«å®Ÿè¡Œã•ã‚Œã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºã‹ã‚ã¾ã™ã€‚

```
% npm run lint
```

### ãƒ‡ãƒãƒƒã‚°ã¨ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã®ç’°å¢ƒæ§‹ç¯‰

Google Chromeã«Vue DevToolsã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã‚µãƒ¼ãƒãƒ¼ã®ç’°å¢ƒæ§‹ç¯‰

Expressã‚’APIã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦æ©Ÿèƒ½ã•ã›ã‚‹ãŸã‚ã«å¿…è¦ãªãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’å°å…¥ã—ã¾ã™ã€‚

```
% npm install --save-dev body-parser
```

build/ ç›´ä¸‹ã« dev-server.js ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚

```js:build/dev-server.js
const bodyParser = require('body-parser')

module.exports = app => {
  app.use(bodyParser.json())
}
```

```diff js:build/webpack.dev.conf.js
const portfinder = require('portfinder')
+ const backend = require('./dev-server')

  devServer: {
    clientLogLevel: 'warning',

    publicPath: config.dev.assetsPublicPath,
+    before: backend,
    proxy: config.dev.proxyTable,
```

### çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å°å…¥

```
% npm install --save vuex es6-promise
```

Vuexé–¢é€£ã®å®Ÿè¡Œã‚³ãƒ¼ãƒ‰ã‚’æ ¼ç´ã™ã‚‹ store ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚Šã¾ã™ã€‚

```
% mkdir -p src/store
% touch src/store/index.js
% touch src/store/mutation-types.js
% touch src/store/mutations.js
% touch src/store/getters.js
% touch src/store/actions.js 
```

Vuexã®ã‚¨ãƒ³ãƒˆãƒªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã—ã¾ã™ã€‚

```js:src/store/index.js
import Vue from 'vue'
import Vuex from 'vuex'
import actions from './actions'
import getters from './getters'
import mutations from './mutations'

Vue.use(Vuex)

export default new Vuex.Store({
  getters,
  actions,
  mutations,
  strict: process.env.NODE_ENV !== 'production'
})

```

src/main.js ã‚’ç·¨é›†ã—ã¦ã€Vuexã®ã‚¹ãƒˆã‚¢ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ Vue.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã¨ãªã‚‹ Vue ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã® store ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦æŒ‡å®šã—ã¾ã™ã€‚

```diff js:src/main.js
import Vue from 'vue'
+ import 'es6-promise/auto'
import App from './App'
import router from './router'
+ import store from './store'

Vue.config.productionTip = false

/* eslint-disable no-new */
new Vue({
  el: '#app',
  router,
+  store,
  components: { App },
  template: '<App/>'
})

```

```diff js:test/unit/karma.conf.js
    browsers: ['PhantomJS'],
    frameworks: ['mocha', 'sinon-chai', 'phantomjs-shim'],
    reporters: ['spec', 'coverage'],
-    files: ['./index.js'],
+    files: [
+      '../../node_modules/es6-promise/dist/es6-promise.auto.js',
+      './index.js'
+    ],
    preprocessors: {
      './index.js': ['webpack', 'sourcemap']
    },
```


### HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å°å…¥

HTTPã«ã‚ˆã‚‹ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ã®ã‚„ã‚Šã¨ã‚Šã‚’å††æ»‘ã«è¡Œã†ãŸã‚ã€RESTful APIã®é€šä¿¡å‡¦ç†ã®éƒ¨åˆ†ã‚’æŠ½è±¡åŒ–ã§ãã‚‹HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª `axios` ã‚’å°å…¥ã—ã¾ã™ã€‚

```
% npm install --save axios
```

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€apiãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¦APIãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ§‹é€ åŒ–ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```
% mkdir -p src/api
% touch src/api/index.js
```

### å˜ä½“ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®å°å…¥

```
% npm install --save-dev @vue/test-utils@1.0.0-beta.24
```

```diff js:test/unit/specs/HelloWorld.spec.js
- import Vue from 'vue'
+ import { mount } from '@vue/test-utils'
import HelloWorld from '@/components/HelloWorld'

describe('HelloWorld.vue', () => {
  it('should render correct contents', () => {
-    const Constructor = Vue.extend(HelloWorld)
-    const vm = new Constructor().$mount()
-    expect(vm.$el.querySelector('.hello h1').textContent)
-      .to.equal('Welcome to Your Vue.js App')
+    expect(mount(HelloWorld).find('.hello h1').text())
+      .to.equal('Welcome to Your Vue.js App')
  })
})

```

`npm run unit`ã§å˜ä½“ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

### E2Eãƒ†ã‚¹ãƒˆã®ã‚³ãƒãƒ³ãƒ‰ç™»éŒ²

```
% mkdir -p test/e2e/custom-commands
```

```diff js:test/e2e/nightwatch.config.js
module.exports = {
  src_folders: ['test/e2e/specs'],
  output_folder: 'test/e2e/reports',
  custom_assertions_path: ['test/e2e/custom-assertions'],
+  custom_commands_path: ['test/e2e/custom-commands'],
```

2ã¤ã®ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ã‚’ç™»éŒ²ã—ã¾ã™ã€‚

```
% touch test/e2e/custom-commands/trigger.js
% touch test/e2e/custom-commands/enterValue.js
```

```js:test/e2e/custom-commands/trigger.js
exports.command = function (selector, event, keyCode) {
  return this.execute(function (selector. event, keyCode) {
    var e = document.createEvent('HTMLEvents')
    e.initEvent(event, true, true)
    if (keyCode) {
      e.keyCode = keyCode
    }
    document.querySelector(selector).dispatchEvent(e)
  }, [selector, event, keyCode])
}
```

```js:test/e2e/custom-commands/enterValue.js
exports.command = function (selector, value) {
  return this.clearValue(selector) 
    .setValue(selector, value)
    .trigger(selector, 'keyup', 13)
}

```

## Visual Studio Codeã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³

ã€21Stepã€œã€ã§ç´¹ä»‹ã•ã‚Œã¦ã„ãŸæ¨å¥¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä¸€è¦§ã‚’è¨˜éŒ²ã—ã¦ãŠãã¾ã™ã€‚

- Git Lens
- Version Lense
- htmltagwrap
- Auto Close Tag
- Auto Rename Tag
- HTML CSS Support
- Vetur
- Vue Peek
- Bracket Pair Colorizer 2
- change-case
- Code Spell Checker
- javascript console utils
- Visual Studio IntelliCode
- ESLint
- Prettier - Code formatter
- stylelint
- Debugger for Chrome
