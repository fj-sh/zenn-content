---
title: "React Native + Expo ã§é–‹ç™ºã‚’å§‹ã‚ã¦ç”»é¢é·ç§»ã•ã›ã‚‹ã¾ã§"
emoji: "ğŸ”¥"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "reactnative"]
published: true
---

### Expo ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```console
npm i -g expo-cli
```

### React Native ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ

```console
expo init my-first-react-native-app

âœ” Choose a template: â€º blank (TypeScript)  same as blank but with TypeScript configuration
- cd my-first-react-native-app
- yarn start # you can open iOS, Android, or web from here, or run them directly with the commands below.
- yarn android
- yarn ios
- yarn web
```

### ãƒ“ãƒ«ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ã‚¢ãƒ—ãƒªã‚’å‹•ã‹ã™

```console
npm start
```

`Developer tools running on http://localhost:19002` ã¨ã„ã†ã‚³ãƒ¡ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚ŒãŸå¾Œã€`http://localhost:19002` ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã€‚

iOS ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚’å‹•ã‹ãã†ã¨ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆã€‚

```console
â€º Opening on iOS...
xcrun exited with non-zero code: 2
An error was encountered processing the command (domain=NSPOSIXErrorDomain, code=2):
Unable to boot device because we cannot determine the runtime bundle.
No such file or directory
```

ä¸‹è¨˜ã®å¯¾å¿œã‚’è¡Œã„ã€`npm start` â†’ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã® `i` ã‚’æŠ¼ä¸‹ ã§è§£æ¶ˆã§ãã‚‹ã€‚

> xcode ã‚’ç«‹ã¡ä¸Šã’ -> Xcode ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -> Open Developer Tool -> Simulator ã€€ã§ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚’ç«‹ã¡ä¸Šã’ãŸã‚‰ã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã® Device -> Erase all content and settings ã§ã‚»ãƒƒãƒ†ã‚£ãƒ³ã‚°ã‚’ã‚¯ãƒªã‚¢ã€‚
> [xcode ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã‚‰ expo ã§ iOS ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãŒèµ·å‹•ã§ããªããªã£ãŸ](https://www.ok-data.com/entry/xcode%E3%82%92%E3%82%A2%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%83%88%E3%81%97%E3%81%9F%E3%82%89expo%E3%81%A7ios%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%81%8C%E8%B5%B7%E5%8B%95/)

## React Native Paper ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

React Native å‘ã‘ã«é–‹ç™ºã•ã‚ŒãŸ UI ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€Material Design ã«æº–æ‹ ã—ã¦ã„ã‚‹ã€‚

```console
npm i react-native-paper
```

ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹ `babel.config.js` ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã™ã‚‹ã€‚

```js:babel.config.js
module.exports = function(api) {
  api.cache(true);
  return {
    presets: ['babel-preset-expo'],
    env: {
      production: {
        plugins: ['react-native-paper/babel']
      }
    }
  };
};

```

### ã‚µãƒ³ãƒ—ãƒ«ã‚’å‹•ã‹ã™

ã“ã“ã¾ã§ä½œã£ã¦ããŸç’°å¢ƒã‚’ä½¿ã£ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ã‚’å‹•ã‹ã—ã¦ã¿ã‚‹ã€‚

![](https://storage.googleapis.com/zenn-user-upload/3874553c6de3-20220501.png)

ä½œã‚‹ã®ã¯ä»¥ä¸‹ã® 3 ã¤ã€‚

- `App.tsx`
- `lib/components/Main.tsx`
- `lib/components/MyCard.tsx`

```js:App.tsx
import { Provider as PaperProvider } from 'react-native-paper'
import Main from './lib/components/Main'

export default function App() {
  return (
    <PaperProvider>
      <Main />
    </PaperProvider>
  )
}
```

```js:lib/components/Main.tsx
import React from 'react'
import { Button, Headline, Title } from 'react-native-paper'
import { SafeAreaView, ScrollView } from 'react-native'
import MyCard from './MyCard'

const Main = () => (
  <SafeAreaView>
    <ScrollView>
      <Headline
        style={{
          margin: 15,
        }}
      >
        è‰²ã‚“ãªãƒ‘ãƒ¼ãƒ„ã‚’ã”ã¡ã‚ƒã¾ãœ
      </Headline>
      <Title
        style={{
          margin: 15,
        }}
      >
        ã‚¿ã‚¤ãƒˆãƒ«ã ã‚ˆã€œ
      </Title>
      <Button
        mode={'contained'}
        style={{
          margin: 30,
        }}
      >
        containedãªãƒœã‚¿ãƒ³
      </Button>
      <MyCard />
    </ScrollView>
  </SafeAreaView>
)

export default Main
```

```js:lib/components/MyCard.tsx
import * as React from 'react'
import { Avatar, Button, Card, Title, Paragraph } from 'react-native-paper'
import { ReactNode } from 'react'

const LeftContent = (props: ReactNode) => <Avatar.Icon {...props} icon="folder" />

const MyCard = () => (
  <Card
    style={{
      margin: 20,
    }}
  >
    <Card.Title title="Card Title" subtitle="Card Subtitle" left={LeftContent} />
    <Card.Content>
      <Title>Card title</Title>
      <Paragraph>Card content</Paragraph>
    </Card.Content>
    <Card.Cover source={{ uri: 'https://picsum.photos/700' }} />
    <Card.Actions>
      <Button>Cancel</Button>
      <Button>Ok</Button>
    </Card.Actions>
  </Card>
)

export default MyCard

```

ã“ã“ã¾ã§è§¦ã£ã¦ã¿ã¦ã€React + SwiftUI = React Native ã®ã‚ˆã†ãªå°è±¡ã‚’å—ã‘ãŸã€‚

React ã¨ SwiftUI ä¸¡æ–¹ã®çµŒé¨“ãŒã‚ã‚‹ã¨ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã—ã‚„ã™ã„ã‚ˆã†ã«æ€ãˆãŸã€‚

## ç”»é¢é·ç§»ã‚’å®Ÿè£…ã™ã‚‹

ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚

```console
npm i @react-navigation/native
```

```console
expo install react-native-gesture-handler react-native-reanimated react-native-screens react-native-safe-area-context @react-native-community/masked-view
```

## å·¦å³ã«ã‚¹ãƒ©ã‚¤ãƒ‰ã—ã¦ç”»é¢ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆStack Navigatorï¼‰

ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã€€å³ â†’ â† å·¦ ã¨ç”»é¢ãŒåˆ‡ã‚Šæ›¿ã‚ã£ã¦ã„ãç”»é¢ã®ä½œã‚Šæ–¹ã€‚

```console
npm i @react-navigation/stack
```

åˆæœŸç”»é¢

![](https://storage.googleapis.com/zenn-user-upload/4e40da30fd6b-20220501.png)

ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ç§»å‹•ã™ã‚‹ã€‚

![](https://storage.googleapis.com/zenn-user-upload/12bca1ec5d4e-20220501.png)

â€»`Disconnected from Metro` ã¯æ°—ã«ã—ãªã„ã§ãã ã•ã„ã€‚

ã‚³ãƒ¼ãƒ‰ã‚’ã„ã˜ã‚‹ã®ã¯ä»¥ä¸‹ã® 3 ãƒ•ã‚¡ã‚¤ãƒ«ã€‚

- `App.tsx`
- `lib/components/HomeScreen.tsx`
- `lib/components/DetailScreen.tsx`

```js:App.tsx
import 'react-native-gesture-handler'
import { NavigationContainer } from '@react-navigation/native'
import HomeScreen from './lib/components/HomeScreen'
import { createStackNavigator } from '@react-navigation/stack'
import DetailScreen from './lib/components/DetailScreen'

export type RootStackParamList = {
  Home: undefined
  Detail: undefined
}

const Stack = createStackNavigator()
export default function App() {
  return (
    <NavigationContainer>
      <Stack.Navigator initialRouteName={'Home'}>
        <Stack.Screen name={'Home'} component={HomeScreen} />
        <Stack.Screen name={'Detail'} component={DetailScreen} />
      </Stack.Navigator>
    </NavigationContainer>
  )
}
```

```js:lib/components/HomeScreen.tsx
import * as React from 'react'
import { Text, View, Button } from 'react-native'
import { useNavigation } from '@react-navigation/native'
import { StackNavigationProp } from '@react-navigation/stack'
import { RootStackParamList } from '../../App'

type homeScreenProp = StackNavigationProp<RootStackParamList, 'Home'>
const HomeScreen = () => {
  const navigation = useNavigation<homeScreenProp>()
  return (
    <View
      style={{
        flex: 1,
        alignItems: 'center',
        justifyContent: 'center',
      }}
    >
      <Text>ãƒ›ãƒ¼ãƒ ç”»é¢</Text>
      <Button title={'è©³ç´°ã¸'} onPress={() => navigation.navigate('Detail')} />
    </View>
  )
}

export default HomeScreen

```

```js:lib/components/DetailScreen.tsx
import * as React from 'react'
import { View, Text, Button } from 'react-native'
import { useNavigation } from '@react-navigation/native'

const DetailScreen = () => {
  const navigation = useNavigation()
  return (
    <View
      style={{
        flex: 1,
        alignItems: 'center',
        justifyContent: 'center',
      }}
    >
      <Text>è©³ç´°ç”»é¢</Text>
      <Button title={'ãƒ›ãƒ¼ãƒ ã¸'} onPress={() => navigation.goBack()} />
    </View>
  )
}

export default DetailScreen

```

#### å‚è€ƒ

[Hello React Navigation](https://reactnavigation.org/docs/hello-react-navigation)

#### ã‚¨ãƒ©ãƒ¼å¯¾å¿œ

ä»¥ä¸‹ã®ã‚ˆã†ãª`navigation.navigate` ã§...

```js
<Button title={"è©³ç´°ã¸"} onPress={() => navigation.navigate("Detail")} />
```

ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆ

```console
TS2345: Argument of type 'string' is not assignable to parameter of type '{ key: string; params?: undefined; merge?: boolean | undefined; } | { name: never; key?: string | undefined; params: never; merge?: boolean | undefined; }'.
```

ã“ã¡ã‚‰ã® StackOverflow ã‚’å‚è€ƒã«è§£æ¶ˆã—ãŸã€‚

[navigation.navigate('Home') showing some error in typescript](https://stackoverflow.com/questions/68779417/navigation-navigatehome-showing-some-error-in-typescript)

## ã‚¿ãƒ–ã§åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆTab Navigatorï¼‰

```console
npm i @react-navigation/bottom-tabs
```

![](https://storage.googleapis.com/zenn-user-upload/8f3548f0359b-20220502.png)

ä¿®æ­£ã¯ `App.tsx` ã®ã¿ã€‚

```diff js:App.tsx
import 'react-native-gesture-handler'
import { NavigationContainer } from '@react-navigation/native'
import HomeScreen from './lib/components/HomeScreen'
+ import { createBottomTabNavigator } from '@react-navigation/bottom-tabs'
import DetailScreen from './lib/components/DetailScreen'

export type RootStackParamList = {
  Home: undefined
  Detail: undefined
}

+ const Tab = createBottomTabNavigator()
export default function App() {
  return (
    <NavigationContainer>
+      <Tab.Navigator initialRouteName={'Home'}>
+        <Tab.Screen name={'Home'} component={HomeScreen} />
+        <Tab.Screen name={'Detail'} component={DetailScreen} />
+      </Tab.Navigator>
    </NavigationContainer>
  )
}
```
